(()=>{var v=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];var o=()=>Array(9).fill(0);var a=class{constructor(){this.gameActive=!0;this.currentPlayer=1;this.boardState=o()}restart(){this.boardState=o(),this.currentPlayer=1,this.gameActive=!0}changePlayer(){return this.currentPlayer=this.currentPlayer===1?2:1,this.currentPlayer}selectCell(r){return this.boardState[r]=this.currentPlayer,this.boardState.every(e=>e!==0)}checkWinner(){let{boardState:r,currentPlayer:e}=this;for(let t of v){let l=0;for(let n of t)r[n]===e&&(l+=1);if(l===3)return this.gameActive=!1,t}}};var c=class{constructor(){this.restartButton=document.querySelector("#restart");this.drawTrigger=document.querySelector("#game-draw");this.marks={1:document.querySelectorAll(".mark-1"),2:document.querySelectorAll(".mark-2")};this.playerTriggers={1:document.querySelector("#trigger-1"),2:document.querySelector("#trigger-2")};this.winTriggers={1:document.querySelector("#game-win-1"),2:document.querySelector("#game-win-2")};let r=[...document.querySelectorAll(".cell")];this.cellsElements=r.map(e=>({cell:e,trigger:e.querySelector(".cell-trigger"),marks:{1:document.querySelector(".mark-1"),2:document.querySelector(".mark-2")}})),this.playerTriggers[1].click();for(let e of this.marks[2])e.style.display="none"}restart(r){for(let{cell:e}of this.cellsElements)e.removeAttribute("style");for(let e of[1,2])for(let t of this.marks[e])t.removeAttribute("style"),e===2&&(t.style.display="none");if(r===2)for(let e of Object.values(this.playerTriggers))e.click()}renderMarks(r,e,t){t.forEach((l,n)=>{if(l!==0)return;let{marks:i}=this.cellsElements[n];i[e].style.display="none",i[r].style.display=""})}handleCellClick(r,e){let t=this.cellsElements.find(l=>l.cell===r);!t||t.marks[e].click()}handlePlayerChange(r){this.playerTriggers[r].click()}handleGameDraw(){this.drawTrigger.click()}handleGameFinish(r,e){for(let{cell:t}of this.cellsElements)t.style.pointerEvents="none";for(let t of e)this.cellsElements[t].trigger.click();this.winTriggers[r].click()}};var m=class{constructor(){this.model=new a,this.view=new c,this.setEventListeners(),this.setCellEventListeners()}setEventListeners(){this.view.restartButton.addEventListener("click",()=>this.restartGame)}setCellEventListeners(){let r=e=>{let t=e.currentTarget;this.handleCellClick(t)};for(let{cell:e}of this.view.cellsElements)e.addEventListener("click",r,{once:!0});this.removeCellEventListeners=()=>{for(let{cell:e}of this.view.cellsElements)e.removeEventListener("click",r)}}handleCellClick(r){let e=r.dataset.cell;if(!e)return;let{model:t,view:l}=this,{boardState:n}=t,i=parseInt(e),d=t.selectCell(i),y=t.checkWinner();if(l.handleCellClick(r,t.currentPlayer),t.gameActive&&!d){let s=t.currentPlayer,h=t.changePlayer();l.handlePlayerChange(s),l.handlePlayerChange(h),l.renderMarks(h,s,n);return}if(t.gameActive&&d){l.handleGameDraw();return}if(y){let{currentPlayer:s}=t;l.handleGameFinish(s,y)}}restartGame(){var t;let{view:r,model:e}=this;(t=this.removeCellEventListeners)==null||t.call(this),this.setCellEventListeners(),r.restart(e.currentPlayer),e.restart()}};window.Webflow=window.Webflow||[];window.Webflow.push(()=>{new m});})();
